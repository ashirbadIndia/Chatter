(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,a){},170:function(e,t,a){e.exports=a.p+"static/media/avatar-white.d557e9ee.svg"},172:function(e,t,a){e.exports=a(340)},296:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){},299:function(e,t,a){},300:function(e,t,a){},330:function(e,t){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){},34:function(e,t,a){e.exports=a.p+"static/media/avatar.a3b899b0.svg"},340:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(32),o=a.n(s),c=a(17),i=a(6),l=a(161),u=(a(180),a(8)),m=a(9),p=a(11),d=a(10),h=a(19),f=a(22),E=Object(f.b)(),v=a(349),b=a(348),g=a(21),y=a(5),O=a(12),N=a.n(O),w=a(18),S=a(75),j=a.n(S),C=j.a.create({baseURL:"/api/users",headers:{"Content-Type":"application/json"}}),k=function(){return{type:"CLEAR_MESSAGES"}},I=(a(87),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onSubmit=function(t){e.props.deleteUser({validation:{password:t.userPassword}},e.props.token)},e.inputField=function(e){var t=e.input,a=e.label,n=e.meta,s=e.type,o=e.errMsg,c=function(e){var t=e.error;return e.touched?r.a.createElement("small",{className:"text-danger"},t):null};return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("input",Object.assign({type:s,className:"form-control ".concat(function(e){var t=e.error,a=e.touched;return a&&t?"is-invalid":a&&!t?"is-valid":null}(n)),id:t.name},t)),c(o?{error:o,touched:!0}:n))},e.componentWillUnmount=function(){e.props.clearMessages()},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("div",{className:"msg-top"},r.a.createElement("h3",null,"Are you sure you want to do this?"),r.a.createElement("h5",null,"Your account will be removed instantly. We will delete all your data along with all the conversations you made."),r.a.createElement("h4",null,"To verify, enter your current password.")),r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(v.a,{name:"userPassword",component:this.inputField,label:"Enter your password",type:"password"}),r.a.createElement("small",{className:"text-danger"},this.props.passwordErr),r.a.createElement("button",{type:"confirm",className:"btn btn-danger"},"Confirm")),r.a.createElement("div",{className:"msg"},r.a.createElement("p",null,"Change of mind?","  "),r.a.createElement(g.a,{to:"/"},"Go back!")))}}]),a}(r.a.Component)),x=Object(b.a)({form:"deleteUserForm",validate:function(e,t){var a={};return e.userEmail&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.userEmail)?a.userEmail="Invaild 'Email Id'":t.auth&&e.userEmail&&e.userEmail!==t.auth.emailId&&(a.userEmail="'Email Id' do not match"),a}})(I),_=Object(i.b)((function(e){return{passwordErr:e.formSubmitErrors.delErrMsg,auth:e.auth.user,token:e.auth.token}}),{deleteUser:function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){var r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.delete("/",{data:e,headers:{Authorization:"Bearer ".concat(t)}});case 2:(r=a.sent).data.error.status||(localStorage.clear(),E.push("/")),n({type:"DELETE_USER",response:r.data});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},clearMessages:k})(x),R=a(347),T=a(342),A=(a(296),function(e){var t=e.input,a=e.label,n=e.meta,s=e.type;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("input",Object.assign({type:s,className:"form-control ".concat(function(e){var t=e.error,a=e.touched;return a&&t?"is-invalid":a&&!t?"is-valid":null}(n)),id:t.name},t)),function(e){var t=e.error;return e.touched?r.a.createElement("small",{className:"text-danger"},t):null}(n))}),D=function(e){return r.a.createElement(R.a.Footer,null,r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"),r.a.createElement(T.a,{onClick:e.onHide},"Close"))},M=Object(b.a)({form:"editPassword",validate:function(e){var t={};return e.userPasswordOld||(t.userPasswordOld="This is required."),e.userPasswordNew&&e.userPasswordNew.length<5&&(t.userPasswordNew="Password too short."),e.userPasswordNew!==e.userPasswordNewRe&&(t.userPasswordNewRe="Password do not match."),t}})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit((function(t){e.editPassword({validation:{password:t.userPasswordOld},updateValues:{password:t.userPasswordNew}},e.token)}))},r.a.createElement("div",{className:"body"},r.a.createElement(v.a,{name:"userPasswordOld",component:A,label:"Enter your old password",type:"password"}),r.a.createElement(v.a,{name:"userPasswordNew",component:A,label:"Enter a new password",type:"password"}),r.a.createElement(v.a,{name:"userPasswordNewRe",component:A,label:"Confirm password",type:"password"}),r.a.createElement("small",{className:"text-danger"},e.errorMsg),r.a.createElement("small",{className:"text-success"},e.succMsg),r.a.createElement(D,{onHide:e.onHide})))})),F=Object(i.b)((function(e){return{token:e.auth.token,errMsg:e.formSubmitErrors.passErrMsg,succMsg:e.formSubmitSuccess.passSucMsg}}),{editPassword:function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){var r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.patch("/",e,{headers:{Authorization:"Bearer ".concat(t)}});case 2:r=a.sent,n({type:"EDIT_PASSWORD",response:{error:r.data.error}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(M),L=function(e){return r.a.createElement(R.a,Object.assign({},e,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,{id:"contained-modal-title-vcenter"},"Change Password")),r.a.createElement(R.a.Body,null,r.a.createElement(F,{onHide:function(){e.onHide()}})))},U=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={show:!1},e.setShow=function(t){e.setState({show:t})},e.onSubmit=function(t){var a={updateValues:{firstName:t.userFirstName,lastName:t.userLastName,emailId:t.userEmail,bio:t.userBio},validation:{password:t.userPassword}};e.props.editUser(a,e.props.token)},e.inputField=function(e){var t=e.input,a=e.label,n=e.meta,s=e.type;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("input",Object.assign({type:s,className:"form-control ".concat(function(e){var t=e.error,a=e.touched;return a&&t?"is-invalid":a&&!t?"is-valid":null}(n)),id:t.name},t)),function(e){var t=e.error;return e.touched?r.a.createElement("small",{className:"text-danger"},t):null}(n))},e.inputTextArea=function(e){var t=e.input,a=e.label;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("textarea",Object.assign({className:"form-control",id:t.name,rows:"3"},t)))},e.componentWillUnmount=function(){e.props.clearMessages()},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Edit account details"),r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(v.a,{name:"userFirstName",component:this.inputField,label:"First Name",type:"text"}),r.a.createElement(v.a,{name:"userLastName",component:this.inputField,label:"Last Name",type:"text"}),r.a.createElement(v.a,{name:"userEmail",component:this.inputField,label:"Email address",type:"email"}),r.a.createElement(v.a,{name:"userBio",component:this.inputTextArea,label:"Edit Bio"}),r.a.createElement(v.a,{name:"userPassword",component:this.inputField,label:"Enter your password to confirm",type:"password"}),r.a.createElement("small",{className:"text-danger"},this.props.errorMsg),r.a.createElement("small",{className:"text-success"},this.props.succMsg),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Confirm")),r.a.createElement("div",{className:"msg"},r.a.createElement("p",null,"To change password","  "),r.a.createElement("p",{className:"link",onClick:function(){return e.setShow(!0)}},"Click here")),r.a.createElement(L,{show:this.state.show,onHide:function(){return e.setShow(!1)}}))}}]),a}(r.a.Component),P=Object(b.a)({form:"editAccountForm",validate:function(e){var t={};return e.userEmail&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.userEmail)&&(t.userEmail="Enter a vaild 'Email Id'"),e.userFirstName||(t.userEmail="This is Required"),t}})(U),H=Object(i.b)((function(e){return{initialValues:{userFirstName:e.auth.user?e.auth.user.firstName:null,userLastName:e.auth.user?e.auth.user.lastName:null,userEmail:e.auth.user?e.auth.user.emailId:null,userBio:e.auth.user?e.auth.user.bio:null},auth:e.auth.user,token:e.auth.token,errorMsg:e.formSubmitErrors.editErrMsg,succMsg:e.formSubmitSuccess.editSucMsg}}),{editUser:function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){var r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.patch("/",e,{headers:{Authorization:"Bearer ".concat(t)}});case 2:r=a.sent,n({type:"EDIT_USER",response:{error:r.data.error,updatedUserInfo:e.updateValues}});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},clearMessages:k})(P),B=(a(297),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).inputField=function(e){var t=e.input,a=e.label,n=e.meta,s=e.type,o=e.placeholder;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("input",Object.assign({type:s,className:"form-control ".concat(function(e){var t=e.error,a=e.touched;return a&&t?"is-invalid":a&&!t?"is-valid":null}(n)),id:t.name,placeholder:o},t)),function(e){var t=e.error;return e.touched?r.a.createElement("small",{className:"text-danger"},t):null}(n))},e.onSubmit=function(t){e.props.login(t)},e.componentWillUnmount=function(){e.props.clearMessages()},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("h6",{className:"text-success"},this.props.successMessage),r.a.createElement("h3",null,"Log in to Chatter"),r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(v.a,{name:"userEmail",component:this.inputField,label:"Email address",type:"email",placeholder:"someone@email.com"}),r.a.createElement(v.a,{name:"userPassword",component:this.inputField,label:"Password",type:"password"}),r.a.createElement("small",{className:"text-danger"},this.props.submitErrorMsg),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),r.a.createElement("div",{className:"new-account"},r.a.createElement("p",null,"No account?","  "),r.a.createElement(g.a,{to:"/user/create"},"Create a new one!")))}}]),a}(r.a.Component)),G=Object(b.a)({form:"loginFormValues",validate:function(e){var t={};return e.userEmail&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.userEmail)&&(t.userEmail="Enter a vaild 'Email Id'"),t}})(B),z=Object(i.b)((function(e){return{submitErrorMsg:e.formSubmitErrors.loginErrMsg,successMessage:e.formSubmitSuccess.loginPageSuccessMessage}}),{login:function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={emailId:e.userEmail,password:e.userPassword},t.next=3,C.post("/auth",{validation:n});case 3:(r=t.sent).data.error.status||localStorage.setItem("userData",JSON.stringify({userId:r.data.userInfo.id,token:r.data.token})),a({type:"LOG_IN",response:r.data});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearMessages:k})(G),V=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onSubmit=function(t){var a={firstName:t.userFirstName,lastName:t.userLastName?t.userLastName:"",emailId:t.userEmail,password:t.userPassword,bio:t.userBio?t.userBio:""};e.props.createUser(a)},e.inputField=function(e){var t=e.input,a=e.label,n=e.meta,s=e.type,o=e.errMsg,c=function(e){var t=e.error;return e.touched?r.a.createElement("small",{className:"text-danger"},t):null};return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("input",Object.assign({type:s,className:"form-control ".concat(function(e){var t=e.error,a=e.touched;return a&&t?"is-invalid":a&&!t?"is-valid":null}(n)),id:t.name},t)),c(o?{error:o,touched:!0}:n))},e.inputTextArea=function(e){var t=e.input,a=e.label;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:t.name},a),r.a.createElement("textarea",Object.assign({className:"form-control",id:t.name,rows:"3"},t)))},e.componentWillUnmount=function(){e.props.successMessage||e.props.clearMessages()},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"form"},r.a.createElement("h3",null,"Create a new account"),r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(v.a,{name:"userFirstName",component:this.inputField,label:"First Name",type:"text"}),r.a.createElement(v.a,{name:"userLastName",component:this.inputField,label:"Last Name",type:"text"}),r.a.createElement(v.a,{name:"userEmail",component:this.inputField,label:"Email address",errMsg:this.props.errMsg,type:"email"}),r.a.createElement(v.a,{name:"userPassword",component:this.inputField,label:"Enter a new password",type:"password"}),r.a.createElement(v.a,{name:"userPasswordR",component:this.inputField,label:"Confirm password",type:"password"}),r.a.createElement(v.a,{name:"userBio",component:this.inputTextArea,label:"Tell something more about yourself"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")),r.a.createElement("div",{className:"msg"},r.a.createElement("p",null,"Already have a account?","  "),r.a.createElement(g.a,{to:"/login"},"Sign-in instead")))}}]),a}(r.a.Component),W=Object(b.a)({form:"newAccountFormRegisters",validate:function(e){var t={};return e.userPassword&&e.userPassword.length<5?t.userPassword="Password too short":e.userPasswordR!==e.userPassword&&(t.userPasswordR="Password do not match"),e.userFirstName||(t.userFirstName="This is required"),e.userEmail&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e.userEmail)&&(t.userEmail="Enter a vaild 'Email Id'"),t}})(V),K={DeleteUser:_,Edit:H,Login:z,SignUp:Object(i.b)((function(e){return{errMsg:e.formSubmitErrors.signupErrMsg,successMessage:e.formSubmitSuccess.signupSucMsg}}),{createUser:function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.post("/",{userInfo:e});case 2:(n=t.sent).data.error.status||E.push("/login"),a({type:"SIGN_UP",response:n.data});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearMessages:k})(W)},J=a(343),q=a(344),X=a(345),Y=a(346),$=a(34),Q=a.n($),Z=(a(144),a(298),function(e){return r.a.createElement("div",{className:"media user-card ".concat(e.not_exist?"removed":""),onClick:function(){e.handleClick(e)}},r.a.createElement("img",{src:e.avatar?e.avatar:Q.a,className:"align-self mr-3 avatar-sm",alt:"user-avatar"}),r.a.createElement("div",{className:"media-body"},r.a.createElement("h5",{className:"mt-0"},e.firstName?"".concat(e.firstName," ").concat(e.lastName):"Do not exist"),r.a.createElement("p",null,e.not_exist?"The account might have removed. Click to remove from contacts":e.info?"".concat(e.info):"hi there!")))}),ee=j.a.create({baseURL:"/api/contacts",headers:{"Content-Type":"application/json"}}),te=function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.get("/",{headers:{Authorization:"Bearer ".concat(e)}});case 2:n=t.sent,a({type:"SYNC_CONTACTS",response:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ae=function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){var r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee.post("/",{contactInfo:{id:e}},{headers:{Authorization:"Bearer ".concat(t)}});case 2:(r=a.sent).data.error.status||n({type:"ADD_CONTACT",response:r.data});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},ne=function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ee.delete("/",{data:{contactInfo:e},headers:{Authorization:"Bearer ".concat(t)}});case 2:a.sent.data.error.status||n({type:"REMOVE_CONTACT",contactInfo:e});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},re=(a(58),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onClick=function(t){if(!t.not_exist){var a=t.userId,n=e.props.auth.id,r=n>=a?"".concat(a,"-").concat(n):"".concat(n,"-").concat(a);e.props.contacts.find((function(e){return e.userId===a}))||e.props.addContact(a,e.props.token),E.push("/chat/".concat(r))}},e.renderList=function(){return e.props.recents.map((function(t){return r.a.createElement(Z,{key:"".concat(t.userId),firstName:t.firstName,lastName:t.lastName,info:t.lastMessage,id:t.userId,userId:t.userId,handleClick:e.onClick,not_exist:t.not_exist})}))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"list-centre"},this.renderList())}}]),a}(r.a.Component)),se=Object(i.b)((function(e){return{recents:e.contacts.recents?e.contacts.recents:[],auth:e.auth.user,token:e.auth.token,contacts:e.contacts.all?e.contacts.all:[]}}),{addContact:ae})(re),oe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onClick=function(t){if(!t.not_exist){var a=t.userId,n=e.props.auth.id,r=n>=a?"".concat(a,"-").concat(n):"".concat(n,"-").concat(a);E.push("/chat/".concat(r))}},e.renderList=e.props.favourites.map((function(t){return r.a.createElement(Z,{key:"".concat(t.userId),firstName:t.firstName,lastName:t.lastName,info:t.lastMessage,id:t.userId,userId:t.userId,handleClick:e.onClick,not_exist:t.not_exist})})),e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"list-centre"},this.renderList)}}]),a}(r.a.Component),ce=Object(i.b)((function(e){return{favourites:e.contacts.favourites?e.contacts.favourites:[],auth:e.auth.user}}))(oe),ie=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).userName=e.props.auth.user?e.props.auth.user.firstName:"",e.componentDidMount=function(){e.props.contacts.isSynced||e.props.syncContacts(e.props.auth.token),e.props.getRecents(e.props.auth.token)},e}return Object(m.a)(a,[{key:"getFavourites",value:function(){return this.props.contacts.isSynced?r.a.createElement(ce,null):r.a.createElement("h6",null,"Loading...")}},{key:"getRecentList",value:function(){return this.props.contacts.isSynced?r.a.createElement(se,null):r.a.createElement("h6",null,"Loading...")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{fluid:!0},r.a.createElement("div",{className:"center"},r.a.createElement("img",{src:Q.a,className:"avatar-large",alt:"user"}),r.a.createElement("h1",{className:"display-4 lgs"},"Welcome, ",this.userName),r.a.createElement("p",{className:"lead"},"Don't hesitate to start conversation."))),r.a.createElement(q.a,{className:"center"},r.a.createElement(X.a,{sm:1,md:2,xs:1},r.a.createElement(Y.a,{className:"column"},r.a.createElement("h1",{className:"display-4 sml"},"Recent"),this.getRecentList()),r.a.createElement(Y.a,null,r.a.createElement("h1",{className:"display-4 sml"},"Favourites"),this.getFavourites()))))}}]),a}(r.a.Component),le=Object(i.b)((function(e){return{auth:e.auth,contacts:e.contacts}}),{syncContacts:te,getRecents:function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.get("/recents",{headers:{Authorization:"Bearer ".concat(e)}});case 2:n=t.sent,a({type:"GET_RECENTS",response:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(ie),ue=(a(299),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{show:e.show,onHide:e.handleClose,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,null,e.modalHeading)),r.a.createElement(R.a.Body,null,e.modalBody),r.a.createElement(R.a.Footer,null,"close"===e.buttonsType?r.a.createElement(T.a,{variant:"secondary",onClick:e.handleClose},"Close"):"y/n"===e.buttonsType?r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"secondary",onClick:e.handleClose},"No"),r.a.createElement(T.a,{variant:"danger",onClick:function(){e.action(),e.handleClose()}},"Yes")):void 0)))}),me=(a(300),a(167)),pe=a.n(me),de={},he=["default","brutal-blue","dark-pink","light-pink","purple","cyan","green"],fe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).colorsList=he.map((function(t){return r.a.createElement("div",{key:t,className:"list-item",onClick:function(){e.props.changeColor(t)}},r.a.createElement("div",{className:"color ".concat(t)}))})),e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"body"},this.colorsList)}}]),a}(r.a.Component),Ee=Object(i.b)(null,{changeColor:function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!de.connected){t.next=4;break}return t.next=3,de.emit("change_color",e);case 3:a({type:"CHANGE_COLOR",color:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(fe),ve={none:"",clearChat:"All conversations will be removed. This step can't be undone.",changeColor:r.a.createElement(Ee,null),removeUser:"All conversations will be removed and the user will be removed from your contact list. However He/She can again start a conversation with you."},be={none:"",clearChat:"Are you sure to clear all conversations",changeColor:"Change Chat color",removeUser:"Are you sure you want to remove this user"},ge=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).actions={clearChat:function(){e.props.clearChat()},removeUser:function(){var t=e.props.contacts.find((function(t){return t.chatId===e.props.chatId}));e.props.removeContact(Object(y.a)({},t),e.props.auth.token),e.props.clearChat(),E.push("/contacts")},changeColor:function(){}},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,{show:this.props.show,modalHeading:be[this.props.action],modalBody:ve[this.props.action],handleClose:this.props.handleClose,buttonsType:"changeColor"===this.props.action?"close":"y/n",action:this.actions[this.props.action]}))}}]),a}(r.a.Component),ye=Object(i.b)((function(e){return{auth:e.auth,chatId:e.chatRoom.chatRoomId,contacts:e.contacts.all}}),{clearChat:function(){return function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de.connected){e.next=3;break}return e.next=3,de.emit("clear_chats");case 3:t({type:"NOTHING"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},removeContact:ne})(ge),Oe=(a(333),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={action:"none",modalShow:!1},e.handleClose=function(){return e.setState({modalShow:!1})},e.handleShow=function(){return e.setState({modalShow:!0})},e.clearChat=function(){e.setState({action:"clearChat"}),e.handleShow()},e.changeColor=function(){e.setState({action:"changeColor"}),e.handleShow()},e.removeUser=function(){e.setState({action:"removeUser"}),e.handleShow()},e.favStat=function(){return e.props.favourites.find((function(t){return t.userId===e.props.userId}))?{text:"Remove from Favourites",action:function(){e.props.removeFav(e.props.userId,e.props.token)}}:{text:"Add to Favourites",action:function(){e.props.addFav(e.props.userId,e.props.token)}}},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"dropdown"},r.a.createElement("div",{className:"dropbtn"},r.a.createElement("ion-icon",{name:"settings-outline"})),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("div",{onClick:this.changeColor},"Choose Color"),r.a.createElement("div",{onClick:this.clearChat},"Clear Chats"),r.a.createElement("div",{onClick:this.removeUser},"Remove User"),r.a.createElement("div",{onClick:this.favStat().action},this.favStat().text)),r.a.createElement(ye,{show:this.state.modalShow,handleClose:this.handleClose,action:this.state.action}))}}]),a}(r.a.Component)),Ne=Object(i.b)((function(e){return console.log(e.chatRoom.userInfo),{favourites:e.contacts.favourites?e.contacts.favourites:[],userId:e.chatRoom.userDetail?e.chatRoom.userDetail._id:null,token:e.auth.token}}),{removeFav:function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("removeFav"),a.next=3,ee.patch("/",{contactInfo:{userId:e,favStat:!1},action:"FAVOURITE"},{headers:{Authorization:"Bearer ".concat(t)}});case 3:a.sent.data.error.status||n({type:"REMOVE_FAV",userId:e});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},addFav:function(e,t){return function(){var a=Object(w.a)(N.a.mark((function a(n){return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("addFav"),a.next=3,ee.patch("/",{contactInfo:{userId:e,favStat:!0},action:"FAVOURITE"},{headers:{Authorization:"Bearer ".concat(t)}});case 3:a.sent.data.error.status||n({type:"ADD_FAV",userId:e});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(Oe),we=(a(334),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{show:this.props.show,onHide:this.props.onHide,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement("div",{className:"m-header"},r.a.createElement("div",{className:"center"},r.a.createElement("img",{src:Q.a,className:"avatar-medium",alt:"user"}),r.a.createElement("h3",null,"".concat(this.props.userdetail.firstName," ").concat(this.props.userdetail.lastName)),r.a.createElement("p",null,this.props.userdetail.bio)))),r.a.createElement(R.a.Body,null,r.a.createElement("div",{className:"details"},r.a.createElement("h5",null,"Email Id:"),r.a.createElement("p",null,this.props.userdetail.emailId))),r.a.createElement(R.a.Footer,null,r.a.createElement(T.a,{onClick:this.props.onHide},"Close"))))}}]),a}(r.a.Component)),Se=Object(i.b)((function(e,t){return{userdetail:e.chatRoom.userDetail?e.chatRoom.userDetail:{firstName:"",lastName:"",bio:"",emailId:""}}}))(we),je=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modalShow:!1},e.setModalShow=function(t){e.setState({modalShow:t})},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"conversationHeader"},r.a.createElement("div",{className:"media"},r.a.createElement("img",{src:Q.a,className:"align-self-center mr-3 avatar",alt:"avatar"}),r.a.createElement("div",{className:"media-body"},r.a.createElement("h4",{className:"mt-0"},this.props.userDetail?"".concat(this.props.userDetail.firstName," ").concat(this.props.userDetail.lastName):"User Name"),r.a.createElement("p",null,"last active"))),r.a.createElement("div",{className:"options"},r.a.createElement(Ne,null),r.a.createElement("div",{className:"icon",onClick:function(){return e.setModalShow(!0)}},r.a.createElement("ion-icon",{name:"information-circle-outline"})),r.a.createElement(Se,{show:this.state.modalShow,onHide:function(){return e.setModalShow(!1)}})))}}]),a}(r.a.Component),Ce=Object(i.b)((function(e){return{userDetail:e.chatRoom.userDetail}}))(je),ke=a(353),Ie=(a(335),Object(i.b)()((function(e){return r.a.createElement("div",{className:"message ".concat(e.isMine?"mine":""," ").concat(e.pos)},r.a.createElement("div",{className:"timestamp"},e.timestamp),r.a.createElement("div",{className:"bubble-container"},r.a.createElement("div",{className:"bubble ".concat(e.color),title:"friendlyTimestamp"},e.messageBody)))}))),xe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).messages=function(){return e.props.chatRoom.messages?e.props.chatRoom.messages.map((function(t){return r.a.createElement(Ie,{timestamp:"",isMine:e.props.chatRoom.myDetail._id===t.author,pos:"start",messageBody:t.message,color:e.props.chatRoom.color,key:t._id})})):null},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"overflow-auto message-body"},r.a.createElement(ke.a,null,this.messages()))}}]),a}(r.a.Component),_e=Object(i.b)((function(e){return{chatRoom:e.chatRoom}}))(xe),Re=(a(336),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={text:""},e.onChange=function(t){e.setState({text:t.target.value})},e.onSubmit=function(t){t.preventDefault();var a=e.state.text;e.setState({text:""}),a&&e.props.addChat(a)},e.onClick=function(t){var a=e.state.text;e.setState({text:""}),a&&e.props.addChat(a)},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"compose"},r.a.createElement("input",{type:"text",className:"compose-input",placeholder:"Type a message, ",value:this.state.text,onChange:this.onChange}),r.a.createElement("div",{className:"toolbar-button",onClick:this.onClick},r.a.createElement("ion-icon",{name:"send-outline"}))))}}]),a}(r.a.Component)),Te=Object(i.b)(null,{addChat:function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!de.connected){t.next=4;break}return console.log(e),t.next=4,de.emit("add_chat",e);case 4:a({type:"NOTHING"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Re),Ae=(a(337),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=Object(w.a)(N.a.mark((function t(){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.match.params.id){t.next=3;break}return t.next=3,e.props.socketConnect(e.props.match.params.id,e.props.auth.token);case 3:case"end":return t.stop()}}),t)}))),e.componentWillUnmount=function(){e.props.socketDisconnect()},e.componentDidUpdate=function(){e.props.chatroom.isConnected&&!e.props.chatroom.isSynced&&e.props.syncChats()},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q.a,{className:"message-box",style:{height:"100vh-56px"}},r.a.createElement(Ce,null),r.a.createElement(_e,null),r.a.createElement(Te,null)))}}]),a}(r.a.Component)),De=Object(i.b)((function(e){return{auth:e.auth,chatroom:e.chatRoom}}),{socketConnect:function(e,t){return function(a){de.connected||(de=pe()("http://localhost:4000/",{path:"/api/chats"})).on("connect",(function(){de.emit("authorization",{token:t,chatRoomId:e}),de.on("verify",(function(t){t.auth&&(console.log("connected"),a({type:"CONNECTED_TO_SOCKET",chatRoomId:e}))})),de.on("receive_chats",(function(e){a({type:"GET_CHATS",data:{userDetail:e.userDetail,messages:e.messages,myDetail:e.myDetail,color:e.color}})})),de.on("chat_added",(function(e){console.log("count"),a({type:"ADD_CHAT",response:e})})),de.on("chat_cleared",(function(e){a({type:"CLEAR_CHAT"})}))}))}},socketDisconnect:function(){return function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de.connected){e.next=5;break}return e.next=3,de.close();case 3:console.log("disconnected"),t({type:"DISCONNECTED_FROM_SOCKET"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},syncChats:function(){return function(){var e=Object(w.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!de.connected){e.next=3;break}return e.next=3,de.emit("get_chats");case 3:t({type:"NOTHING"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ae),Me=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).redirect=function(e,t){t?"/"!==E.location.pathname&&E.push("/"):e?"/"!==E.location.pathname&&"/login"!==E.location.pathname||E.push("/welcome"):"/login"!==E.location.pathname&&"/user/create"!==E.location.pathname&&E.push("/login")},e.loading=function(){return"pending"===e.props.autoLoginStats?r.a.createElement("div",{className:"spinner-border centre",role:"status",style:{margin:"300px 48% auto 48%",width:"64px",height:"64px"}},r.a.createElement("span",{className:"sr-only"},"Loading...")):null},e.componentDidMount=function(){e.props.loginWithToken(),e.redirect(e.props.isSignedIn,"pending"===e.props.autoLoginStats)},e.componentDidUpdate=function(){e.redirect(e.props.isSignedIn,"pending"===e.props.autoLoginStats)},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.loading())}}]),a}(r.a.Component),Fe=Object(i.b)((function(e){return{isSignedIn:e.auth.isSignedIn,autoLoginStats:e.autoLoginStats}}),{loginWithToken:function(){return function(){var e=Object(w.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(localStorage.getItem("userData")),console.log(a),n=a?a.token:null,console.log(n),n){e.next=8;break}t({type:"LOG_IN_WITH_TOKEN",response:{error:{status:!0,message:"No token stored"}}}),e.next=14;break;case 8:return e.next=10,C.get("/auth",{headers:{Authorization:"Bearer ".concat(n)}});case 10:r=e.sent,console.log(r),r.data.error.status?localStorage.clear():(localStorage.clear(),localStorage.setItem("userData",JSON.stringify({userId:r.data.userInfo.id,token:r.data.token}))),t({type:"LOG_IN_WITH_TOKEN",response:Object(y.a)(Object(y.a)({},r.data),{},{token:r.data.token})});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Me),Le=a(350),Ue=a(351),Pe=a(170),He=a.n(Pe),Be=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).userIcon=function(){return e.props.auth.isSignedIn?r.a.createElement("div",{className:"dropdown drp-right"},r.a.createElement("div",{className:"dropbtn white"},r.a.createElement("img",{src:He.a,alt:"user-avatar"})),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("div",{className:"no-reactivity"},r.a.createElement("small",null,"Signed in as"),r.a.createElement("h5",null,e.props.auth?e.props.auth.user.firstName:"")),r.a.createElement(g.a,{to:"/about-me"},"About Me"),r.a.createElement(g.a,{to:"/user/edit"},"Edit Profile"),r.a.createElement(g.a,{to:"/user/delete"},"Delete Profile"),r.a.createElement("div",{onClick:function(){e.props.logout()}},"Sign out"))):null},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(Le.a,{bg:"dark",variant:"dark"},r.a.createElement(Le.a.Brand,{href:"#welcome"},"Chatter"),r.a.createElement(Ue.a,{className:"mr-auto"},r.a.createElement(g.a,{className:"nav-link active",to:"/welcome"},"Home"),r.a.createElement(g.a,{className:"nav-link active",to:"/contacts"},"Contacts")),this.userIcon())}}]),a}(r.a.Component),Ge=Object(i.b)((function(e){return{auth:e.auth}}),{logout:function(){return localStorage.clear(),{type:"LOG_OUT"}}})(Be),ze=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).onClick=function(t){if(t.not_exist)e.props.removeContact({id:t.id,chatId:t.chatId},e.props.token);else{var a=t.userId,n=e.props.auth.id,r=n>=a?"".concat(a,"-").concat(n):"".concat(n,"-").concat(a);E.push("/chat/".concat(r))}},e.renderList=function(){return e.props.contactList.map((function(t){return console.log(t),r.a.createElement(Z,{key:"".concat(t.userId),firstName:t.firstName,lastName:t.lastName,info:t.bio?t.bio:"",id:t.id,userId:t.userId,chatId:t.chatId,handleClick:e.onClick,not_exist:t.not_exist})}))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"list-left"},this.renderList())}}]),a}(r.a.Component),Ve=Object(i.b)((function(e){return{contactList:e.contacts.all?e.contacts.all:[],auth:e.auth.user,token:e.auth.token}}),{removeContact:ne})(ze),We=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).createContact=function(t){var a=t.id;if(e.props.contacts.find((function(e){return e.userId===a}))){var n=a,r=e.props.auth.id,s=r>=n?"".concat(n,"-").concat(r):"".concat(r,"-").concat(n);E.push("/chat/".concat(s))}else console.log("create_contact"),e.props.addContact(a,e.props.token)},e.renderList=function(){return e.props.searchResults.map((function(t){return r.a.createElement(Z,{key:"".concat(t.userId),firstName:t.firstName,lastName:t.lastName,info:t.bio,id:t.id,handleClick:e.createContact})}))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"display-4 sml contact-title"},"Results"),r.a.createElement("div",{className:"list-left"},this.renderList(),r.a.createElement("div",{className:"gap"})))}}]),a}(r.a.Component),Ke=Object(i.b)((function(e){return{searchResults:e.searchResults?e.searchResults:[],auth:e.auth.user,contacts:e.contacts.all,token:e.auth.token}}),{addContact:ae})(We),Je=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showSearchResult:!1,search:""},e.onFocus=function(){e.setState({showSearchResult:!0})},e.onBlur=function(){e.props.searchResults.length||e.setState({showSearchResult:!1})},e.onChange=function(t){e.setState({search:t.target.value})},e.onSubmit=function(t){t.preventDefault(),e.props.searchUser(e.state.search)},e.componentDidMount=function(){e.props.isSynced||e.props.auth.user&&e.props.syncContacts(e.props.auth.user.id)},e.componentWillUnmount=function(){e.props.clearSearch()},e}return Object(m.a)(a,[{key:"renderResults",value:function(){return this.state.showSearchResult?r.a.createElement(Ke,null):null}},{key:"getContacts",value:function(){return this.props.isSynced?(console.log(this.props.isSynced),r.a.createElement(Ve,null)):r.a.createElement("h6",null,"Loading...")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{fluid:!0},r.a.createElement(q.a,null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"input-group input-group-lg"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Search users","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-lg",name:"search",value:this.state.search,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur}),r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"inputGroup-sizing-lg"},r.a.createElement("ion-icon",{name:"search-outline",className:"search-icon"}))))),r.a.createElement("p",{className:"lead"},r.a.createElement("br",null),"Search for users inside or outside your contact list. Once you initialize conversation, the user will be added to your contact list."))),r.a.createElement(q.a,null,this.renderResults(),r.a.createElement("h1",{className:"display-4 sml contact-title"},"Contacts"),this.getContacts()))}}]),a}(r.a.Component),qe=Object(i.b)((function(e){return{auth:e.auth,isSynced:e.contacts.isSynced,searchResults:e.searchResults}}),{syncContacts:te,searchUser:function(e){return function(){var t=Object(w.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.get("/",{params:{term:e}});case 2:n=t.sent,a({type:"SEARCH_USER",results:n.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearSearch:function(){return{type:"CLEAR_SEARCH"}}})(Je),Xe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{fluid:!0},r.a.createElement("div",{className:"center"},r.a.createElement("img",{src:Q.a,className:"avatar-large",alt:"user"}),r.a.createElement("h1",{className:"display-4 lgs"},this.props.user?"".concat(this.props.user.firstName," ").concat(this.props.user.lastName):"user-name"),r.a.createElement("p",{className:"lead"},this.props.user?this.props.user.bio:""))),r.a.createElement(q.a,{className:"center"},r.a.createElement("div",{className:"details"},r.a.createElement("h5",null,"Email Id:"),r.a.createElement("p",null,this.props.user?this.props.user.emailId:"")),r.a.createElement(g.a,{to:"/user/edit"},"Edit Details")))}}]),a}(r.a.Component),Ye=Object(i.b)((function(e){return{user:e.auth.user}}))(Xe),$e=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.b,{history:E},r.a.createElement(Ge,null),r.a.createElement(h.a,{path:"/",component:Fe}),r.a.createElement(h.a,{path:"/login",exact:!0,component:K.Login}),r.a.createElement(h.a,{path:"/user/create",exact:!0,component:K.SignUp}),r.a.createElement(h.a,{path:"/user/edit",exact:!0,component:K.Edit}),r.a.createElement(h.a,{path:"/user/delete",exact:!0,component:K.DeleteUser}),r.a.createElement(h.a,{path:"/about-me",exact:!0,component:Ye}),r.a.createElement(h.a,{path:"/welcome",exact:!0,component:le}),r.a.createElement(h.a,{path:"/contacts",exact:!0,component:qe}),r.a.createElement(h.a,{path:"/chat/:id",exact:!0,component:De})))}}]),a}(r.a.Component),Qe=a(352),Ze=a(63),et=Object(c.c)({searchResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SEARCH_USER"===t.type?t.results:"CLEAR_SEARCH"===t.type?[]:e},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSignedIn:!1},t=arguments.length>1?arguments[1]:void 0;return"LOG_IN"!==t.type||t.response.error.status?"DELETE_USER"!==t.type||t.response.error.status?"EDIT_USER"!==t.type||t.response.error.status?"LOG_OUT"===t.type?{isSignedIn:!1}:"LOG_IN_WITH_TOKEN"===t.type?t.response.error.status?{isSignedIn:!1}:{isSignedIn:!0,user:t.response.userInfo,token:t.response.token}:e:{isSignedIn:e.isSignedIn,user:Object(y.a)(Object(y.a)({},e.user),t.response.updatedUserInfo),token:e.token}:{isSignedIn:!1}:{isSignedIn:!0,user:t.response.userInfo,token:t.response.token}},form:Qe.a,contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isSynced:!1},t=arguments.length>1?arguments[1]:void 0;return"SYNC_CONTACTS"!==t.type||t.response.error.status?"GET_RECENTS"!==t.type||t.response.error.status?"ADD_CONTACT"===t.type?{isSynced:!0,all:[].concat(Object(Ze.a)(e.all),[t.response.contactInfo]),favourites:e.favourites?e.favourites:[],recents:e.recents?e.recents:[]}:"LOG_OUT"===t.type||"DELETE_USER"===t.type?{isSynced:!1,all:[],favourites:[],recents:[]}:"REMOVE_CONTACT"===t.type?{isSynced:!0,all:e.all.filter((function(e){return e.id!==t.contactInfo.id})),favourites:e.favourites.filter((function(e){return e.id!==t.contactInfo.id})),recents:e.recents}:"ADD_FAV"===t.type?Object(y.a)(Object(y.a)({},e),{},{favourites:[].concat(Object(Ze.a)(e.favourites),[e.all.find((function(e){return e.userId===t.userId}))])}):"REMOVE_FAV"===t.type?Object(y.a)(Object(y.a)({},e),{},{favourites:e.favourites.filter((function(e){return e.userId!==t.userId}))}):e:Object(y.a)(Object(y.a)({},e),{},{recents:t.response.recents,favourites:e.favourites?e.favourites:[],all:e.all?e.all:[]}):Object(y.a)(Object(y.a)({},e),{},{isSynced:!0,all:t.response.contacts,favourites:t.response.contacts.filter((function(e){return e.favourite})),recents:e.recents?e.recents:[]})},formSubmitErrors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("SIGN_UP"===t.type&&t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{signupErrMsg:t.response.error.message});if("DELETE_USER"===t.type)return t.response.error.status?Object(y.a)(Object(y.a)({},e),{},{delErrMsg:t.response.error.message}):Object(y.a)(Object(y.a)({},e),{},{delErrMsg:null});if("EDIT_USER"===t.type){if(t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{editErrMsg:t.response.error.message});if(!t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{editErrMsg:null})}if("EDIT_PASSWORD"===t.type){if(t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{passErrMsg:t.response.error.message});if(!t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{passErrMsg:null})}return"LOG_IN"===t.type&&t.response.error.status?Object(y.a)(Object(y.a)({},e),{},{loginErrMsg:t.response.error.message}):"CLEAR_MESSAGES"===t.type?{}:e},formSubmitSuccess:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if("EDIT_USER"===t.type){if(!t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{editSucMsg:"Successfully updated your profile"});if(t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{editSucMsg:null})}if("EDIT_PASSWORD"===t.type){if(!t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{passSucMsg:"Successfully updated your password"});if(t.response.error.status)return Object(y.a)(Object(y.a)({},e),{},{passSucMsg:null})}return("SIGN_UP"!==t.type||t.response.error.status)&&("DELETE_USER"!==t.type||t.response.error.status)?"CLEAR_MESSAGES"===t.type?{}:e:Object(y.a)(Object(y.a)({},e),{},{loginPageSuccessMessage:t.response.result.message})},autoLoginStats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending",t=arguments.length>1?arguments[1]:void 0;return"LOG_IN_WITH_TOKEN"===t.type?"resolved":e},chatRoom:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isConnected:!1,isSynced:!1},t=arguments.length>1?arguments[1]:void 0;return"CONNECTED_TO_SOCKET"===t.type?Object(y.a)(Object(y.a)({},e),{},{isConnected:!0,isSynced:!1,chatRoomId:t.chatRoomId}):"DISCONNECTED_FROM_SOCKET"===t.type?{isConnected:!1,isSynced:!1}:"GET_CHATS"===t.type?Object(y.a)(Object(y.a)({},e),{},{isSynced:!0,userDetail:t.data.userDetail,color:t.data.color,myDetail:t.data.myDetail,messages:t.data.messages}):"ADD_CHAT"===t.type?Object(y.a)(Object(y.a)({},e),{},{messages:[].concat(Object(Ze.a)(e.messages),[t.response])}):"CLEAR_CHAT"===t.type?Object(y.a)(Object(y.a)({},e),{},{messages:[]}):"CHANGE_COLOR"===t.type?Object(y.a)(Object(y.a)({},e),{},{color:t.color}):e}}),tt="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):c.d,at=Object(c.e)(et,tt(Object(c.a)(l.a)));o.a.render(r.a.createElement(i.a,{store:at},r.a.createElement($e,null)),document.querySelector("#root"))},58:function(e,t,a){},87:function(e,t,a){}},[[172,1,2]]]);
//# sourceMappingURL=main.d48ed241.chunk.js.map